<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家庭用水模拟器 - 河北省公益广告大赛 | 珍惜水资源，节水有我</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --party-red: #c70000;    /* 党徽红 - 主色 */
            --hebei-blue: #1a5fad;   /* 河北蓝 - 主色 */
            --hebei-blue-dark: #134a8a;
            --eco-green: #27ae60;    /* 生态绿 */
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --hebei-yellow: #f1c40f;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 100%;
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            position: relative;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .app-header {
            background: linear-gradient(135deg, var(--party-red) 0%, #a00000 100%);
            color: white;
            padding: 25px 20px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hebei-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(45deg, transparent 65%, rgba(255,255,255,0.1) 65%, rgba(255,255,255,0.1) 70%, transparent 70%),
                linear-gradient(-45deg, transparent 65%, rgba(255,255,255,0.1) 65%, rgba(255,255,255,0.1) 70%, transparent 70%);
            background-size: 30px 30px;
            opacity: 0.3;
        }
        
        .great-wall-pattern {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 15px;
            background: 
                repeating-linear-gradient(90deg, 
                    transparent, 
                    transparent 10px, 
                    rgba(255,255,255,0.3) 10px, 
                    rgba(255,255,255,0.3) 20px);
        }
        
        .party-emblem {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 40px;
            height: 40px;
            background: var(--party-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: gold;
            font-size: 24px;
            z-index: 2;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .logo {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            z-index: 2;
            border: 3px solid var(--hebei-blue);
        }
        
        .logo i {
            font-size: 40px;
            color: var(--hebei-blue);
        }
        
        h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
            position: relative;
            z-index: 2;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 15px;
            position: relative;
            z-index: 2;
        }
        
        .theme-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 5px 15px;
            margin: 10px 0;
            font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .app-nav {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 30px;
            padding: 8px;
            margin: 0 20px;
            position: relative;
            z-index: 2;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.5s;
        }
        
        .nav-item:hover::before {
            left: 100%;
        }
        
        .nav-item.active {
            background: white;
            color: var(--party-red);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .app-body {
            padding: 25px 20px;
            min-height: 500px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .page.active {
            display: block;
        }
        
        .page-title {
            font-size: 1.4rem;
            color: var(--hebei-blue);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .page-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 80px;
            height: 3px;
            background: var(--party-red);
            border-radius: 3px;
        }
        
        .page-title i {
            margin-right: 12px;
            background: rgba(26, 95, 173, 0.15);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--hebei-blue);
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(0, 0, 0, 0.03);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--hebei-blue);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .input-row {
            display: flex;
            gap: 10px;
        }
        
        .input-field {
            flex: 1;
            position: relative;
        }
        
        .input-field input {
            width: 100%;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            background: #f9f9f9;
            transition: all 0.3s;
        }
        
        .input-field input:focus {
            border-color: var(--hebei-blue);
            background: white;
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 95, 173, 0.2);
        }
        
        .input-field .unit {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .btn {
            background: linear-gradient(to right, var(--party-red), #a00000);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(199, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to right,
                rgba(255, 255, 255, 0) 0%,
                rgba(255, 255, 255, 0.3) 50%,
                rgba(255, 255, 255, 0) 100%
            );
            transform: rotate(30deg);
            transition: all 0.6s;
        }
        
        .btn:hover::after {
            transform: translateX(100%) rotate(30deg);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(199, 0, 0, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: white;
            color: var(--hebei-blue);
            border: 1px solid var(--hebei-blue);
        }
        
        .result-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
            border: 1px solid #bbdefb;
            position: relative;
            overflow: hidden;
        }
        
        .hebei-watermark {
            position: absolute;
            bottom: -30px;
            right: -30px;
            font-size: 8rem;
            opacity: 0.05;
            color: var(--hebei-blue);
            transform: rotate(-20deg);
            z-index: 0;
        }
        
        .data-watermark {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.7rem;
            opacity: 0.5;
            color: var(--dark);
            z-index: 1;
        }
        
        .result-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--hebei-blue);
            margin: 10px 0;
            position: relative;
            z-index: 1;
        }
        
        .result-label {
            color: var(--dark);
            font-size: 1.1rem;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .comparison {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.7);
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
            position: relative;
            z-index: 1;
        }
        
        .comp-item {
            text-align: center;
            flex: 1;
        }
        
        .comp-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark);
        }
        
        .comp-label {
            font-size: 0.9rem;
            color: var(--dark);
        }
        
        .highlight {
            color: var(--party-red);
            font-weight: 700;
        }
        
        .chart-container {
            height: 250px;
            margin: 25px 0;
        }
        
        .saving-card {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 1px solid #c8e6c9;
        }
        
        .saving-title {
            font-size: 1.2rem;
            color: var(--eco-green);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .saving-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--eco-green);
            margin: 10px 0;
        }
        
        .tip-card {
            background: #fff8e1;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.95rem;
            border-left: 4px solid var(--hebei-yellow);
        }
        
        .certificate-container {
            text-align: center;
            margin: 20px 0;
        }
        
        .certificate-preview {
            width: 100%;
            max-width: 300px;
            height: 400px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 3px solid var(--party-red);
        }
        
        .cert-overlay {
            background: rgba(255, 255, 255, 0.95);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .cert-content {
            text-align: center;
            z-index: 2;
        }
        
        .cert-title {
            font-size: 1.8rem;
            color: var(--party-red);
            margin-bottom: 20px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .cert-text {
            font-size: 1.2rem;
            margin: 15px 0;
            line-height: 1.8;
            color: var(--dark);
        }
        
        .cert-water {
            font-size: 2rem;
            color: var(--hebei-blue);
            font-weight: 700;
            margin: 20px 0;
            background: rgba(26, 95, 173, 0.1);
            padding: 10px;
            border-radius: 10px;
            display: inline-block;
        }
        
        .cert-logo {
            width: 80px;
            height: 80px;
            background: var(--party-red);
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .hebei-feature {
            background: rgba(26, 95, 173, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            border-left: 4px solid var(--hebei-blue);
        }
        
        .hebei-feature i {
            color: var(--hebei-blue);
            font-size: 1.5rem;
            margin-right: 15px;
        }
        
        .dialect-switch {
            display: flex;
            background: #f5f7fa;
            border-radius: 30px;
            padding: 5px;
            margin: 20px 0;
        }
        
        .dialect-option {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .dialect-option.active {
            background: var(--hebei-blue);
            color: white;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .action-buttons .btn {
            flex: 1;
            margin-top: 0;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f5f7fa;
            color: var(--dark);
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        .footer-logo {
            font-weight: 700;
            color: var(--hebei-blue);
        }
        
        .performance-badge {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(39, 174, 96, 0.9);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            z-index: 3;
        }
        
        .loading-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: #ddd;
            z-index: 1000;
            display: none;
        }
        
        .loading-indicator::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 50%;
            background: var(--party-red);
            animation: loading 1.5s infinite;
        }
        
        .saved-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--eco-green);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: none;
        }
        
        .ai-tag {
            display: inline-block;
            background: rgba(0,0,0,0.05);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.8rem;
            margin-top: 8px;
            color: #666;
        }
        
        .water-usage-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .water-usage-item:last-child {
            border-bottom: none;
        }
        
        .water-usage-label {
            font-weight: 500;
        }
        
        .water-usage-value {
            color: var(--hebei-blue);
            font-weight: 700;
        }
        
        .name-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            margin: 10px 0;
        }
        
        .references {
            margin-top: 30px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
            font-size: 0.8rem;
            color: #666;
        }
        
        .official-badge {
            display: inline-block;
            background: var(--party-red);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            margin-left: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes loading {
            0% { left: -50%; }
            100% { left: 150%; }
        }
        
        @keyframes ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* 响应式优化 */
        @media (max-width: 640px) {
            .app-header {
                padding: 20px 15px 15px;
            }
            
            .app-nav {
                margin: 0 10px;
            }
            
            .nav-item {
                padding: 6px 10px;
                font-size: 0.8rem;
            }
            
            .app-body {
                padding: 20px 15px;
            }
            
            .page-title {
                font-size: 1.2rem;
            }
            
            .input-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .result-value {
                font-size: 2rem;
            }
            
            .cert-title {
                font-size: 1.5rem;
            }
            
            .cert-text {
                font-size: 1rem;
            }
            
            .chart-container {
                height: 220px;
            }
            
            .certificate-preview {
                height: 360px;
            }
        }
        
        @media (max-width: 480px) {
            .logo {
                width: 60px;
                height: 60px;
            }
            
            .logo i {
                font-size: 30px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .subtitle {
                font-size: 0.9rem;
            }
            
            .page-title {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }
            
            .cert-water {
                font-size: 1.5rem;
            }
            
            .cert-logo {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .party-emblem {
                width: 30px;
                height: 30px;
                font-size: 18px;
            }
        }
        
        /* iOS 特定样式 */
        @supports (-webkit-touch-callout: none) {
            .btn {
                -webkit-tap-highlight-color: transparent;
            }
            
            input, select, textarea {
                font-size: 16px; /* 防止iOS缩放 */
            }
        }
        
        /* Android 特定样式 */
        @supports (-moz-appearance:none) {
            .btn {
                -moz-tap-highlight-color: transparent;
            }
        }
    </style>
</head>
<body>
    <!-- 性能指示器 -->
    <div class="loading-indicator" id="loading-indicator"></div>
    <div class="saved-indicator" id="saved-indicator">数据已保存 ✓</div>
    
    <div class="container">
        <div class="app-header">
            <div class="hebei-pattern"></div>
            <div class="great-wall-pattern"></div>
            <div class="party-emblem">党</div>
            <div class="performance-badge">性能优化版</div>
            
            <div class="logo">
                <i class="fas fa-tint"></i>
            </div>
            <h1>家庭用水模拟器</h1>
            <p class="subtitle">河北省公益广告大赛 · 节水有我</p>
            <div class="theme-badge">奋进河北我创益</div>
            
            <div class="app-nav">
                <div class="nav-item active" data-page="home">
                    <i class="fas fa-home"></i> 首页
                </div>
                <div class="nav-item" data-page="input">
                    <i class="fas fa-calculator"></i> 计算
                </div>
                <div class="nav-item" data-page="result">
                    <i class="fas fa-chart-bar"></i> 报告
                </div>
                <div class="nav-item" data-page="cert">
                    <i class="fas fa-award"></i> 证书
                </div>
            </div>
        </div>
        
        <div class="app-body">
            <!-- 首页 -->
            <div class="page active" id="home-page">
                <div class="page-title">
                    <i class="fas fa-info-circle"></i> 河北水资源现状
                </div>
                
                <div class="card">
                    <p>河北省是我国水资源严重短缺的省份之一，人均水资源量仅为全国平均水平的1/7。随着经济快速发展和人口增长，水资源供需矛盾日益突出。</p>
                </div>
                
                <div class="card">
                    <div class="hebei-feature">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>全省多年平均水资源总量205亿立方米，人均水资源量307立方米<span class="official-badge">官方数据</span></div>
                    </div>
                    
                    <div class="hebei-feature">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>11个设区市中有7个处于极度缺水状态<span class="official-badge">官方数据</span></div>
                    </div>
                    
                    <div class="hebei-feature">
                        <i class="fas fa-tint"></i>
                        <div>居民生活用水占全省总用水量的15%，节水潜力巨大<span class="official-badge">官方数据</span></div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>节水倡议</h3>
                    <p>根据《河北省节约用水条例》第十六条，我们倡议每个家庭：</p>
                    <ul style="padding-left: 20px; margin: 15px 0;">
                        <li>使用节水型器具</li>
                        <li>一水多用，提高用水效率</li>
                        <li>缩短淋浴时间</li>
                        <li>及时修复漏水</li>
                    </ul>
                    <div class="tip-card">
                        <i class="fas fa-book"></i> 《河北省节约用水条例》规定：公民应当增强节约用水意识，养成节约用水习惯。
                    </div>
                </div>
                
                <button class="btn" id="start-btn">
                    <i class="fas fa-play"></i> 开始计算我的用水量
                </button>
                
                <div class="references">
                    <strong>数据来源与参考文献：</strong><br>
                    • 《河北省节约用水条例》<br>
                    • 《河北省居民生活用水定额》（DB13/T 5457-2021）<br>
                    • 《河北省水资源公报》<br>
                    • 《河北省人民政府关于实行最严格水资源管理制度的实施意见》
                </div>
            </div>
            
            <!-- 输入页 -->
            <div class="page" id="input-page">
                <div class="page-title">
                    <i class="fas fa-tint"></i> 家庭用水计算
                </div>
                
                <div class="card">
                    <p>请根据您家庭的实际情况填写以下信息，我们将计算您的家庭用水量。</p>
                    <div class="tip-card">
                        <i class="fas fa-info-circle"></i> 数据参考《河北省居民生活用水定额标准》
                    </div>
                </div>
                
                <div class="input-group">
                    <label>家庭成员数量</label>
                    <div class="input-row">
                        <div class="input-field">
                            <input type="number" id="family-members" value="3" min="1" max="10">
                            <div class="unit">人</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>淋浴用水</h3>
                    <div class="input-group">
                        <label>每天淋浴次数</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="shower-times" value="2" min="0" max="10">
                                <div class="unit">次/天</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>每次淋浴时间</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="shower-minutes" value="10" min="1" max="60">
                                <div class="unit">分钟</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tip-card">
                        <i class="fas fa-lightbulb"></i> 提示：缩短淋浴时间1分钟，每次可节约9升水<span class="official-badge">DB13/T 5457-2021</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>洗漱用水</h3>
                    <div class="input-group">
                        <label>每天使用水龙头次数</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="faucet-times" value="8" min="0" max="50">
                                <div class="unit">次/天</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>每次使用时间</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="faucet-minutes" value="2" min="0" max="10">
                                <div class="unit">分钟</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>其他用水</h3>
                    <div class="input-group">
                        <label>每天马桶冲水次数</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="toilet-flushes" value="12" min="0" max="50">
                                <div class="unit">次/天</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="input-group">
                        <label>每周洗衣次数</label>
                        <div class="input-row">
                            <div class="input-field">
                                <input type="number" id="washing-times" value="3" min="0" max="20">
                                <div class="unit">次/周</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn" id="calculate-btn">
                    <i class="fas fa-calculator"></i> 计算我的用水量
                </button>
            </div>
            
            <!-- 结果页 -->
            <div class="page" id="result-page">
                <div class="page-title">
                    <i class="fas fa-chart-bar"></i> 用水分析报告
                </div>
                
                <div class="result-card">
                    <div class="hebei-watermark">冀</div>
                    <div class="data-watermark">数据依据河北省地方标准</div>
                    <div class="result-label">您的家庭日用水量</div>
                    <div class="result-value" id="total-water-usage">0 <span style="font-size: 1.2rem;">升</span></div>
                    
                    <div class="comparison">
                        <div class="comp-item">
                            <div class="comp-value" id="avg-water-usage">350升</div>
                            <div class="comp-label">河北平均</div>
                        </div>
                        <div class="comp-item">
                            <div class="comp-value" id="water-difference">+0%</div>
                            <div class="comp-label">超出</div>
                        </div>
                        <div class="comp-item">
                            <div class="comp-value" id="ranking">前50%</div>
                            <div class="comp-label">节水排名</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>用水分布</h3>
                    <div class="chart-container">
                        <canvas id="water-chart"></canvas>
                    </div>
                </div>
                
                <div class="card">
                    <h3>详细用水量</h3>
                    <div class="water-usage-item">
                        <span class="water-usage-label">淋浴用水</span>
                        <span class="water-usage-value" id="shower-water">0 升</span>
                    </div>
                    <div class="water-usage-item">
                        <span class="water-usage-label">洗漱用水</span>
                        <span class="water-usage-value" id="faucet-water">0 升</span>
                    </div>
                    <div class="water-usage-item">
                        <span class="water-usage-label">马桶用水</span>
                        <span class="water-usage-value" id="toilet-water">0 升</span>
                    </div>
                    <div class="water-usage-item">
                        <span class="water-usage-label">洗衣用水</span>
                        <span class="water-usage-value" id="washing-water">0 升</span>
                    </div>
                </div>
                
                <div class="saving-card">
                    <div class="saving-title">您的节水潜力</div>
                    <div class="saving-value" id="saving-potential">0 <span style="font-size: 1.2rem;">升/天</span></div>
                    <p>相当于每天节约 <span class="highlight" id="bottle-equivalent">0瓶</span> 矿泉水</p>
                    
                    <div class="comparison" style="margin-top: 20px;">
                        <div class="comp-item">
                            <div class="comp-value" id="weekly-saving">0L</div>
                            <div class="comp-label">周节水</div>
                        </div>
                        <div class="comp-item">
                            <div class="comp-value" id="yearly-saving">0L</div>
                            <div class="comp-label">年节水</div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>个性化节水建议</h3>
                    <p>根据您的用水情况，我们为您量身定制以下建议：</p>
                    <div id="personalized-tips">
                        <!-- 个性化建议将在这里动态生成 -->
                    </div>
                    <div class="tip-card">
                        <i class="fas fa-book"></i> 以上建议基于《河北省节约用水条例》和《河北省居民生活用水定额》
                    </div>
                </div>
                
                <button class="btn" id="cert-btn">
                    <i class="fas fa-award"></i> 生成节水承诺证书
                </button>
            </div>
            
            <!-- 证书页 -->
            <div class="page" id="cert-page">
                <div class="page-title">
                    <i class="fas fa-award"></i> 节水承诺证书
                </div>
                
                <div class="card">
                    <p>感谢您参与节水行动！以下是根据您的用水情况生成的节水承诺证书。</p>
                    <div class="tip-card">
                        <i class="fas fa-star"></i> 河北省公益广告大赛推荐作品 · 奋进河北我创益
                    </div>
                    
                    <div class="input-group">
                        <label for="user-name-input">请输入您的姓名生成专属证书</label>
                        <input type="text" id="user-name-input" class="name-input" placeholder="例如：张节水" value="张节水">
                    </div>
                    
                    <div class="dialect-switch">
                        <div class="dialect-option active" id="dialect-standard">普通话</div>
                        <div class="dialect-option" id="dialect-hebei">河北方言</div>
                    </div>
                </div>
                
                <div class="certificate-container">
                    <div class="certificate-preview">
                        <div class="cert-overlay">
                            <div class="cert-content" id="cert-content">
                                <div class="cert-title">节水承诺证书</div>
                                <div class="cert-text">兹证明 <span class="highlight" id="user-name">张节水</span> 家庭</div>
                                <div class="cert-text">积极参与河北省节水行动</div>
                                <div class="cert-water" id="cert-saving">每天节水 0升</div>
                                <div class="cert-text">承诺践行节约用水</div>
                                <div class="cert-text">保护河北水资源</div>
                                
                                <div class="cert-logo">
                                    <i class="fas fa-tint"></i>
                                </div>
                                
                                <div class="cert-text">河北省公益广告大赛推荐</div>
                                <div class="cert-text" id="cert-date">2025年</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <p>您的节水行动将为河北水资源保护做出重要贡献！</p>
                    
                    <div class="hebei-feature">
                        <i class="fas fa-hand-holding-water"></i>
                        <div>如果全省10%的家庭像您一样节水，每年可节约<span id="province-saving">1.2</span>亿立方米水资源</div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="download-btn">
                        <i class="fas fa-download"></i> 保存证书
                    </button>
                    <button class="btn btn-secondary" id="share-btn">
                        <i class="fas fa-share-alt"></i> 分享成果
                    </button>
                </div>
                
                <button class="btn" style="margin-top: 15px;" id="restart-btn">
                    <i class="fas fa-redo"></i> 重新计算
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p><span class="footer-logo">河北省公益广告大赛</span> · 节水有我特别征集</p>
            <p>主办单位：河北省水利厅 · 河北省精神文明建设办公室 · 河北省市场监督管理局</p>
            <p>大赛主题：奋进河北我创益 · 珍惜水资源，节水有我</p>
        </div>
    </div>
    
    <script>
        // 全局变量存储计算结果
        let waterUsage = {
            total: 0,
            shower: 0,
            faucet: 0,
            toilet: 0,
            washing: 0,
            savingPotential: 0
        };
        
        // 图表实例
        let waterChart = null;
        
        // 显示加载指示器
        function showLoading() {
            const loader = document.getElementById('loading-indicator');
            loader.style.display = 'block';
        }
        
        // 隐藏加载指示器
        function hideLoading() {
            const loader = document.getElementById('loading-indicator');
            loader.style.display = 'none';
        }
        
        // 显示保存指示器
        function showSavedIndicator() {
            const indicator = document.getElementById('saved-indicator');
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
        }
        
        // 页面导航功能
        function navigateToPage(pageId) {
            showLoading();
            
            // 更新导航状态
            document.querySelectorAll('.nav-item').forEach(i => {
                i.classList.remove('active');
            });
            document.querySelector(`[data-page="${pageId}"]`).classList.add('active');
            
            // 显示对应页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 添加动画效果
            setTimeout(() => {
                document.getElementById(`${pageId}-page`).classList.add('active');
                hideLoading();
                
                // 保存当前页面状态
                localStorage.setItem('lastPage', pageId);
                
                // 如果是结果页，更新数据
                if (pageId === 'result') {
                    updateResultPage();
                }
                
                // 如果是证书页，更新证书
                if (pageId === 'cert') {
                    updateCertificate();
                }
            }, 300);
        }
        
        // 表单边界检查
        function validateInputs() {
            const inputs = document.querySelectorAll('input[type="number"]');
            let isValid = true;
            
            inputs.forEach(input => {
                const value = parseFloat(input.value);
                const min = parseFloat(input.min);
                const max = parseFloat(input.max);
                
                if (isNaN(value) || value < min || value > max) {
                    isValid = false;
                    input.style.borderColor = 'var(--accent)';
                    input.style.animation = 'shake 0.5s';
                    
                    // 添加错误提示
                    if (!input.nextElementSibling || !input.nextElementSibling.classList.contains('error-msg')) {
                        const errorMsg = document.createElement('div');
                        errorMsg.className = 'error-msg';
                        errorMsg.style.color = 'var(--accent)';
                        errorMsg.style.fontSize = '0.8rem';
                        errorMsg.style.marginTop = '5px';
                        errorMsg.textContent = `请输入 ${min} 到 ${max} 之间的值`;
                        input.parentNode.appendChild(errorMsg);
                    }
                    
                    // 移除动画
                    setTimeout(() => {
                        input.style.animation = '';
                    }, 500);
                } else {
                    input.style.borderColor = '';
                    // 移除错误提示
                    if (input.nextElementSibling && input.nextElementSibling.classList.contains('error-msg')) {
                        input.nextElementSibling.remove();
                    }
                }
            });
            
            return isValid;
        }
        
        // 计算用水量
        function calculateWaterUsage() {
            const familyMembers = parseInt(document.getElementById('family-members').value) || 3;
            const showerTimes = parseInt(document.getElementById('shower-times').value) || 2;
            const showerMinutes = parseInt(document.getElementById('shower-minutes').value) || 10;
            const faucetTimes = parseInt(document.getElementById('faucet-times').value) || 8;
            const faucetMinutes = parseInt(document.getElementById('faucet-minutes').value) || 2;
            const toiletFlushes = parseInt(document.getElementById('toilet-flushes').value) || 12;
            const washingTimes = parseInt(document.getElementById('washing-times').value) || 3;
            
            // 计算各部分用水量（升/天）- 依据《河北省居民生活用水定额》（DB13/T 5457-2021）
            const showerWater = familyMembers * showerTimes * showerMinutes * 9; // 每分钟9升
            const faucetWater = familyMembers * faucetTimes * faucetMinutes * 6; // 每分钟6升
            const toiletWater = familyMembers * toiletFlushes * 6; // 每次6升
            const washingWater = washingTimes * 70 / 7; // 每周洗衣转换为日用水量（每次70升）
            
            const totalWater = showerWater + faucetWater + toiletWater + washingWater;
            
            // 计算节水潜力（基于河北平均350升）
            const savingPotential = Math.max(0, totalWater - 350);
            
            // 返回计算结果
            return {
                total: Math.round(totalWater),
                shower: Math.round(showerWater),
                faucet: Math.round(faucetWater),
                toilet: Math.round(toiletWater),
                washing: Math.round(washingWater),
                savingPotential: Math.round(savingPotential)
            };
        }
        
        // 生成个性化节水建议
        function generatePersonalizedTips(usage) {
            let tipsHTML = '<ul style="padding-left: 20px; margin: 15px 0;">';
            const maxUsage = Math.max(usage.shower, usage.faucet, usage.toilet, usage.washing);
            
            if (usage.shower === maxUsage) {
                tipsHTML += `<li>您的淋浴用水占比最高，缩短淋浴时间至8分钟，每天可节约 <span class="highlight">${Math.round(usage.shower * 0.2)}</span> 升水</li>`;
            }
            
            if (usage.faucet === maxUsage) {
                tipsHTML += `<li>您的洗漱用水占比最高，安装节水型水龙头，每次使用可节约30%用水</li>`;
            }
            
            if (usage.toilet === maxUsage) {
                tipsHTML += `<li>您的马桶用水占比最高，使用节水型马桶，每次冲水可节约3升</li>`;
            }
            
            if (usage.washing === maxUsage) {
                tipsHTML += `<li>您的洗衣用水占比最高，衣物集中洗涤，每周减少1次洗衣可节约 <span class="highlight">70</span> 升水</li>`;
            }
            
            // 通用建议
            tipsHTML += `<li>一水多用，如用洗菜水浇花，可提高用水效率</li>`;
            tipsHTML += `<li>及时修复漏水，一个滴水的水龙头每月可浪费3吨水</li>`;
            
            tipsHTML += '</ul>';
            return tipsHTML;
        }
        
        // 更新结果页
        function updateResultPage() {
            // 计算用水量
            waterUsage = calculateWaterUsage();
            
            // 更新总用水量
            document.getElementById('total-water-usage').textContent = waterUsage.total + ' 升';
            
            // 更新用水分布
            document.getElementById('shower-water').textContent = waterUsage.shower + ' 升';
            document.getElementById('faucet-water').textContent = waterUsage.faucet + ' 升';
            document.getElementById('toilet-water').textContent = waterUsage.toilet + ' 升';
            document.getElementById('washing-water').textContent = waterUsage.washing + ' 升';
            
            // 计算与平均值的差异
            const avgWater = 350; // 河北平均日用水量
            const difference = waterUsage.total - avgWater;
            const differencePercent = Math.round((difference / avgWater) * 100);
            
            document.getElementById('water-difference').textContent = 
                (difference >= 0 ? '+' : '') + differencePercent + '%';
            
            // 计算节水排名
            let ranking = '前50%';
            if (differencePercent <= -20) ranking = '前10%';
            else if (differencePercent <= 0) ranking = '前30%';
            else if (differencePercent <= 20) ranking = '前70%';
            else ranking = '后30%';
            
            document.getElementById('ranking').textContent = ranking;
            
            // 更新节水潜力
            document.getElementById('saving-potential').textContent = waterUsage.savingPotential + ' 升/天';
            document.getElementById('bottle-equivalent').textContent = Math.round(waterUsage.savingPotential / 0.5) + '瓶';
            document.getElementById('weekly-saving').textContent = (waterUsage.savingPotential * 7) + 'L';
            document.getElementById('yearly-saving').textContent = (waterUsage.savingPotential * 365) + 'L';
            
            // 生成并显示个性化建议
            document.getElementById('personalized-tips').innerHTML = generatePersonalizedTips(waterUsage);
            
            // 更新图表
            if (waterChart) {
                waterChart.data.datasets[0].data = [
                    waterUsage.shower, 
                    waterUsage.faucet, 
                    waterUsage.toilet, 
                    waterUsage.washing
                ];
                waterChart.update();
            }
        }
        
        // 更新证书
        function updateCertificate() {
            // 获取用户输入的姓名
            const userName = document.getElementById('user-name-input').value || '张节水';
            
            // 设置用户名称
            document.getElementById('user-name').textContent = userName;
            
            // 设置节水量
            document.getElementById('cert-saving').textContent = `每天节水 ${waterUsage.savingPotential}升`;
            
            // 设置日期
            const now = new Date();
            document.getElementById('cert-date').textContent = `${now.getFullYear()}年${now.getMonth() + 1}月${now.getDate()}日`;
            
            // 计算全省节水潜力
            const provinceSaving = (waterUsage.savingPotential * 7.5 * 10000000 * 0.1 * 365 / 100000000).toFixed(1);
            document.getElementById('province-saving').textContent = provinceSaving;
        }
        
        // 保存数据到本地存储
        function saveFormData() {
            const formData = {
                familyMembers: document.getElementById('family-members').value,
                showerTimes: document.getElementById('shower-times').value,
                showerMinutes: document.getElementById('shower-minutes').value,
                faucetTimes: document.getElementById('faucet-times').value,
                faucetMinutes: document.getElementById('faucet-minutes').value,
                toiletFlushes: document.getElementById('toilet-flushes').value,
                washingTimes: document.getElementById('washing-times').value,
                userName: document.getElementById('user-name-input') ? document.getElementById('user-name-input').value : '张节水'
            };
            
            localStorage.setItem('waterFormData', JSON.stringify(formData));
            showSavedIndicator();
        }
        
        // 加载保存的数据
        function loadSavedData() {
            const savedData = localStorage.getItem('waterFormData');
            if (savedData) {
                const formData = JSON.parse(savedData);
                
                document.getElementById('family-members').value = formData.familyMembers;
                document.getElementById('shower-times').value = formData.showerTimes;
                document.getElementById('shower-minutes').value = formData.showerMinutes;
                document.getElementById('faucet-times').value = formData.faucetTimes;
                document.getElementById('faucet-minutes').value = formData.faucetMinutes;
                document.getElementById('toilet-flushes').value = formData.toiletFlushes;
                document.getElementById('washing-times').value = formData.washingTimes;
                
                if (document.getElementById('user-name-input')) {
                    document.getElementById('user-name-input').value = formData.userName;
                }
            }
        }
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 加载保存的数据
            loadSavedData();
            
            // 恢复上次访问的页面
            const lastPage = localStorage.getItem('lastPage') || 'home';
            navigateToPage(lastPage);
            
            // 初始化图表
            const waterCtx = document.getElementById('water-chart').getContext('2d');
            waterChart = new Chart(waterCtx, {
                type: 'doughnut',
                data: {
                    labels: ['淋浴', '洗漱', '马桶', '洗衣'],
                    datasets: [{
                        data: [0, 0, 0, 0],
                        backgroundColor: [
                            'rgba(26, 95, 173, 0.8)',
                            'rgba(39, 174, 96, 0.8)',
                            'rgba(155, 89, 182, 0.8)',
                            'rgba(241, 196, 15, 0.8)'
                        ],
                        borderColor: [
                            'rgba(26, 95, 173, 1)',
                            'rgba(39, 174, 96, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(241, 196, 15, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 13
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.parsed}升`;
                                }
                            }
                        }
                    }
                }
            });
            
            // 添加摇动动画关键帧
            const style = document.createElement('style');
            style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
            
            // 自动保存表单数据
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('change', saveFormData);
                input.addEventListener('blur', saveFormData);
            });
        });
        
        // 事件监听器
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const pageId = this.getAttribute('data-page');
                navigateToPage(pageId);
            });
        });
        
        document.getElementById('start-btn').addEventListener('click', function() {
            navigateToPage('input');
        });
        
        document.getElementById('calculate-btn').addEventListener('click', function() {
            if (validateInputs()) {
                saveFormData();
                navigateToPage('result');
            }
        });
        
        document.getElementById('cert-btn').addEventListener('click', function() {
            navigateToPage('cert');
        });
        
        document.getElementById('restart-btn').addEventListener('click', function() {
            navigateToPage('input');
        });
        
        document.getElementById('download-btn').addEventListener('click', function() {
            alert('证书下载功能已触发！在实际应用中，这里会生成并下载证书图片。');
        });
        
        document.getElementById('share-btn').addEventListener('click', function() {
            const userName = document.getElementById('user-name-input').value || '节水先锋';
            const saving = waterUsage.savingPotential;
            alert(`分享功能已触发！\n\n我是${userName}，我每天可节水${saving}升，为美丽河北助力！\n\n在实际应用中，这里会调用设备的分享功能或生成分享海报。`);
        });
        
        // 姓名输入实时更新证书
        document.getElementById('user-name-input').addEventListener('input', function() {
            document.getElementById('user-name').textContent = this.value || '张节水';
            saveFormData();
        });
        
        // 方言切换功能
        document.getElementById('dialect-hebei').addEventListener('click', function() {
            document.querySelectorAll('.dialect-option').forEach(opt => {
                opt.classList.remove('active');
            });
            this.classList.add('active');
            
            document.getElementById('cert-content').innerHTML = `
                <div class="cert-title">节水承诺证书</div>
                <div class="cert-text">兹证明 <span class="highlight">${document.getElementById('user-name').textContent}</span> 家庭</div>
                <div class="cert-text">积极参与河北省节水行动</div>
                <div class="cert-water">俺每天节水 ${waterUsage.savingPotential}升</div>
                <div class="cert-text">承诺好好节水</div>
                <div class="cert-text">保护咱河北的水资源</div>
                
                <div class="cert-logo">
                    <i class="fas fa-tint"></i>
                </div>
                
                <div class="cert-text">河北省公益广告大赛推荐</div>
                <div class="cert-text">${document.getElementById('cert-date').textContent}</div>
            `;
        });
        
        document.getElementById('dialect-standard').addEventListener('click', function() {
            document.querySelectorAll('.dialect-option').forEach(opt => {
                opt.classList.remove('active');
            });
            this.classList.add('active');
            
            document.getElementById('cert-content').innerHTML = `
                <div class="cert-title">节水承诺证书</div>
                <div class="cert-text">兹证明 <span class="highlight">${document.getElementById('user-name').textContent}</span> 家庭</div>
                <div class="cert-text">积极参与河北省节水行动</div>
                <div class="cert-water">每天节水 ${waterUsage.savingPotential}升</div>
                <div class="cert-text">承诺践行节约用水</div>
                <div class="cert-text">保护河北水资源</div>
                
                <div class="cert-logo">
                    <i class="fas fa-tint"></i>
                </div>
                
                <div class="cert-text">河北省公益广告大赛推荐</div>
                <div class="cert-text">${document.getElementById('cert-date').textContent}</div>
            `;
        });
    </script>
</body>
</html>
